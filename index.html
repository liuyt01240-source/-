<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}table td,table th{padding:0}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c1{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c2{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c3{height:11pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c2 doc-content"><p class="c1"><span class="c0">import React, { useState, useEffect, useRef } from &#39;react&#39;;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">// --- &#28216;&#25103;&#26680;&#24515;&#36923;&#36753;&#19982;&#24120;&#37327; ---</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">const SUITS = [&#39;&spades;&#39;, &#39;&hearts;&#39;, &#39;&clubs;&#39;, &#39;&diams;&#39;];</span></p><p class="c1"><span class="c0">const VALUES = [</span></p><p class="c1"><span class="c0">&nbsp; &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;, &#39;10&#39;, &#39;J&#39;, &#39;Q&#39;, &#39;K&#39;, &#39;A&#39;, &#39;2&#39;</span></p><p class="c1"><span class="c0">];</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">// &#26435;&#37325;&#20540;&#65292;&#29992;&#20110;&#27604;&#36739;&#22823;&#23567;</span></p><p class="c1"><span class="c0">const VALUE_MAP = {</span></p><p class="c1"><span class="c0">&nbsp; &#39;3&#39;: 3, &#39;4&#39;: 4, &#39;5&#39;: 5, &#39;6&#39;: 6, &#39;7&#39;: 7, &#39;8&#39;: 8, &#39;9&#39;: 9, &#39;10&#39;: 10,</span></p><p class="c1"><span class="c0">&nbsp; &#39;J&#39;: 11, &#39;Q&#39;: 12, &#39;K&#39;: 13, &#39;A&#39;: 14, &#39;2&#39;: 15,</span></p><p class="c1"><span class="c0">&nbsp; &#39;black_joker&#39;: 20, &#39;red_joker&#39;: 21</span></p><p class="c1"><span class="c0">};</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">const TYPES = {</span></p><p class="c1"><span class="c0">&nbsp; SINGLE: &#39;SINGLE&#39;,</span></p><p class="c1"><span class="c0">&nbsp; PAIR: &#39;PAIR&#39;,</span></p><p class="c1"><span class="c0">&nbsp; TRIPLE: &#39;TRIPLE&#39;,</span></p><p class="c1"><span class="c0">&nbsp; TRIPLE_ONE: &#39;TRIPLE_ONE&#39;,</span></p><p class="c1"><span class="c0">&nbsp; TRIPLE_TWO: &#39;TRIPLE_TWO&#39;,</span></p><p class="c1"><span class="c0">&nbsp; BOMB: &#39;BOMB&#39;,</span></p><p class="c1"><span class="c0">&nbsp; ROCKET: &#39;ROCKET&#39;,</span></p><p class="c1"><span class="c0">&nbsp; STRAIGHT: &#39;STRAIGHT&#39;,</span></p><p class="c1"><span class="c0">&nbsp; STRAIGHT_PAIR: &#39;STRAIGHT_PAIR&#39;, </span></p><p class="c1"><span class="c0">&nbsp; PLANE: &#39;PLANE&#39;, </span></p><p class="c1"><span class="c0">&nbsp; INVALID: &#39;INVALID&#39;</span></p><p class="c1"><span class="c0">};</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">const DIFFICULTIES = {</span></p><p class="c1"><span class="c0">&nbsp; EASY: { label: &#39;&#31616;&#21333;&#39;, color: &#39;bg-green-500&#39; },</span></p><p class="c1"><span class="c0">&nbsp; NORMAL: { label: &#39;&#26222;&#36890;&#39;, color: &#39;bg-blue-500&#39; },</span></p><p class="c1"><span class="c0">&nbsp; HARD: { label: &#39;&#22256;&#38590;&#39;, color: &#39;bg-red-500&#39; }</span></p><p class="c1"><span class="c0">};</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">// &#29983;&#25104;&#19968;&#21103;&#29260;</span></p><p class="c1"><span class="c0">const createDeck = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; let deck = [];</span></p><p class="c1"><span class="c0">&nbsp; let id = 0;</span></p><p class="c1"><span class="c0">&nbsp; // &#26222;&#36890;&#29260;</span></p><p class="c1"><span class="c0">&nbsp; for (let v of VALUES) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; for (let s of SUITS) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; deck.push({</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; id: id++,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; value: v,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; suit: s,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; rank: VALUE_MAP[v],</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; display: v</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; // &#22823;&#23567;&#29579;</span></p><p class="c1"><span class="c0">&nbsp; deck.push({ id: id++, value: &#39;black_joker&#39;, suit: &#39;&#39;, rank: 20, display: &#39;Joker&#39;, isJoker: true, color: &#39;black&#39; });</span></p><p class="c1"><span class="c0">&nbsp; deck.push({ id: id++, value: &#39;red_joker&#39;, suit: &#39;&#39;, rank: 21, display: &#39;Joker&#39;, isJoker: true, color: &#39;red&#39; });</span></p><p class="c1"><span class="c0">&nbsp; return deck;</span></p><p class="c1"><span class="c0">};</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">// &#29260;&#22411;&#20998;&#26512;&#19982;&#27604;&#36739;&#36923;&#36753;</span></p><p class="c1"><span class="c0">const GameLogic = {</span></p><p class="c1"><span class="c0">&nbsp; sortCards: (cards) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; return [...cards].sort((a, b) =&gt; b.rank - a.rank); // &#38477;&#24207;: &#22823; -&gt; &#23567;</span></p><p class="c1"><span class="c0">&nbsp; },</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; // &#20998;&#26512;&#29260;&#22411;</span></p><p class="c1"><span class="c0">&nbsp; analyzeHand: (cards) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (cards.length === 0) return { type: TYPES.INVALID };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const sorted = GameLogic.sortCards(cards);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const len = sorted.length;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const ranks = sorted.map(c =&gt; c.rank);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // &#32479;&#35745;&#27599;&#24352;&#29260;&#30340;&#25968;&#37327;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const counts = {};</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; ranks.forEach(r =&gt; counts[r] = (counts[r] || 0) + 1);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const uniqueRanks = Object.keys(counts).map(Number).sort((a, b) =&gt; b - a); // &#38477;&#24207;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // 1. &#29579;&#28856;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (len === 2 &amp;&amp; ranks[0] === 21 &amp;&amp; ranks[1] === 20) return { type: TYPES.ROCKET, rank: 100 };</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // 2. &#28856;&#24377;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (len === 4 &amp;&amp; uniqueRanks.length === 1) return { type: TYPES.BOMB, rank: ranks[0] };</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // 3. &#21333;&#24352;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (len === 1) return { type: TYPES.SINGLE, rank: ranks[0] };</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // 4. &#23545;&#23376;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (len === 2 &amp;&amp; uniqueRanks.length === 1) return { type: TYPES.PAIR, rank: ranks[0] };</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // 5. &#19977;&#24352;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (len === 3 &amp;&amp; uniqueRanks.length === 1) return { type: TYPES.TRIPLE, rank: ranks[0] };</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // 6. &#19977;&#24102;&#19968;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (len === 4) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; const tripleRank = uniqueRanks.find(r =&gt; counts[r] === 3);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; if (tripleRank) return { type: TYPES.TRIPLE_ONE, rank: tripleRank };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // 7. &#19977;&#24102;&#20108; (&#19968;&#23545;)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (len === 5) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; const tripleRank = uniqueRanks.find(r =&gt; counts[r] === 3);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; const pairRank = uniqueRanks.find(r =&gt; counts[r] === 2);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; if (tripleRank &amp;&amp; pairRank) return { type: TYPES.TRIPLE_TWO, rank: tripleRank };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // 8. &#39034;&#23376; (5&#24352;&#21450;&#20197;&#19978;, &#26368;&#22823;&#26159;A, &#19981;&#33021;&#26377;2&#21644;&#29579;)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (len &gt;= 5 &amp;&amp; uniqueRanks.length === len) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; const max = ranks[0];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; const min = ranks[len - 1];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; if (max &lt; 15 &amp;&amp; (max - min) === (len - 1)) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; return { type: TYPES.STRAIGHT, rank: max, len: len };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // 9. &#36830;&#23545; (3&#23545;&#21450;&#20197;&#19978;)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (len &gt;= 6 &amp;&amp; len % 2 === 0 &amp;&amp; uniqueRanks.length === len / 2) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;const max = uniqueRanks[0];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;const min = uniqueRanks[uniqueRanks.length - 1];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;if (max &lt; 15 &amp;&amp; (max - min) === (uniqueRanks.length - 1) &amp;&amp; Object.values(counts).every(c =&gt; c === 2)) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return { type: TYPES.STRAIGHT_PAIR, rank: max, len: len };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; return { type: TYPES.INVALID };</span></p><p class="c1"><span class="c0">&nbsp; },</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; // &#21028;&#26029;&#33021;&#21542;&#31649;&#19978;</span></p><p class="c1"><span class="c0">&nbsp; canBeat: (playedCards, targetHand) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (!targetHand) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; const type = GameLogic.analyzeHand(playedCards);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; return type.type !== TYPES.INVALID;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const currentHand = GameLogic.analyzeHand(playedCards);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (currentHand.type === TYPES.INVALID) return false;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // &#29579;&#28856;&#26080;&#25932;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (currentHand.type === TYPES.ROCKET) return true;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (targetHand.type === TYPES.ROCKET) return false;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // &#28856;&#24377;&#31649;&#26222;&#36890;&#29260;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (currentHand.type === TYPES.BOMB &amp;&amp; targetHand.type !== TYPES.BOMB) return true;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // &#21516;&#31867;&#22411;&#27604;&#36739;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (currentHand.type === targetHand.type) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; if (currentHand.type === TYPES.STRAIGHT || currentHand.type === TYPES.STRAIGHT_PAIR) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (currentHand.len !== targetHand.len) return false;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; return currentHand.rank &gt; targetHand.rank;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; return false;</span></p><p class="c1"><span class="c0">&nbsp; },</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; // --- AI &#26680;&#24515;&#36741;&#21161;&#20989;&#25968; ---</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; // &#20174;&#25163;&#29260;&#20013;&#25552;&#21462;&#25351;&#23450;&#25968;&#37327;&#30340;&#29260; (helper)</span></p><p class="c1"><span class="c0">&nbsp; getCardsByRank: (hand, rank, count) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; const target = hand.filter(c =&gt; c.rank === rank);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; return target.length &gt;= count ? target.slice(0, count) : [];</span></p><p class="c1"><span class="c0">&nbsp; },</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; // &#26597;&#25214;&#33021;&#22823;&#36807; targetRank &#30340;&#30456;&#21516;&#29260;&#22411;</span></p><p class="c1"><span class="c0">&nbsp; findCardsByType: (hand, type, minRank, length = 0) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; const counts = {};</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; hand.forEach(c =&gt; counts[c.rank] = (counts[c.rank] || 0) + 1);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; const ranks = Object.keys(counts).map(Number).sort((a, b) =&gt; a - b); // &#21319;&#24207;&#65292;&#26041;&#20415;&#25214;&#26368;&#23567;&#30340;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; if (type === TYPES.SINGLE) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const valid = ranks.find(r =&gt; r &gt; minRank);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return valid ? GameLogic.getCardsByRank(hand, valid, 1) : null;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; if (type === TYPES.PAIR) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const valid = ranks.find(r =&gt; r &gt; minRank &amp;&amp; counts[r] &gt;= 2);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return valid ? GameLogic.getCardsByRank(hand, valid, 2) : null;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; if (type === TYPES.TRIPLE) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const valid = ranks.find(r =&gt; r &gt; minRank &amp;&amp; counts[r] &gt;= 3);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return valid ? GameLogic.getCardsByRank(hand, valid, 3) : null;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; if (type === TYPES.BOMB) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const valid = ranks.find(r =&gt; r &gt; minRank &amp;&amp; counts[r] === 4);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return valid ? GameLogic.getCardsByRank(hand, valid, 4) : null;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; if (type === TYPES.TRIPLE_ONE) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // &#25214;&#19968;&#20010;&#19977;&#24352;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const tripleRank = ranks.find(r =&gt; r &gt; minRank &amp;&amp; counts[r] &gt;= 3);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (tripleRank) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const tripleCards = GameLogic.getCardsByRank(hand, tripleRank, 3);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // &#25214;&#19968;&#20010;&#21333;&#24352; (&#19981;&#21253;&#21547;&#21018;&#25165;&#30340;&#19977;&#24352;)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // &#31616;&#21333;&#31574;&#30053;&#65306;&#25214;&#26368;&#23567;&#30340;&#21333;&#24352;&#65292;&#23613;&#37327;&#20445;&#30041;&#28856;&#24377;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const singleRank = ranks.find(r =&gt; r !== tripleRank); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (singleRank) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const singleCard = GameLogic.getCardsByRank(hand, singleRank, 1);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return [...tripleCards, ...singleCard];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return null;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; if (type === TYPES.TRIPLE_TWO) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const tripleRank = ranks.find(r =&gt; r &gt; minRank &amp;&amp; counts[r] &gt;= 3);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (tripleRank) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const tripleCards = GameLogic.getCardsByRank(hand, tripleRank, 3);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // &#25214;&#19968;&#20010;&#23545;&#23376;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const pairRank = ranks.find(r =&gt; r !== tripleRank &amp;&amp; counts[r] &gt;= 2);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (pairRank) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const pairCards = GameLogic.getCardsByRank(hand, pairRank, 2);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return [...tripleCards, ...pairCards];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return null;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; if (type === TYPES.STRAIGHT) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // &#23547;&#25214;&#38271;&#24230;&#20026; length&#65292;&#19988;&#26368;&#23567;&#29260; &gt; minRank &#30340;&#39034;&#23376;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // &#36807;&#28388;&#37325;&#22797;rank&#65292;&#21482;&#30041;&#19968;&#24352;&#29992;&#20110;&#26816;&#26597;&#36830;&#32493;&#24615;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const uniqueCards = [];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ranks.forEach(r =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (r &lt; 15) uniqueCards.push(hand.find(c =&gt; c.rank === r)); // &#25490;&#38500;2&#21644;&#29579;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; uniqueCards.sort((a,b) =&gt; a.rank - b.rank);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for (let i = 0; i &lt;= uniqueCards.length - length; i++) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (uniqueCards[i].rank &gt; minRank) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // &#26816;&#26597;&#36830;&#32493;&#24615;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let isStraight = true;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for (let j = 1; j &lt; length; j++) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (uniqueCards[i+j].rank !== uniqueCards[i].rank + j) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isStraight = false;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isStraight) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return uniqueCards.slice(i, i + length);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return null;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; // &#31616;&#21333;&#36215;&#35265;&#65292;&#36830;&#23545;&#26242;&#30053;&#65292;&#22240;&#20026;&#36923;&#36753;&#31867;&#20284;&#39034;&#23376;&#20294;&#26356;&#22797;&#26434;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; return null;</span></p><p class="c1"><span class="c0">&nbsp; },</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; // AI &#36873;&#29260;&#31574;&#30053;</span></p><p class="c1"><span class="c0">&nbsp; findBestMove: (hand, targetHand, difficulty = &#39;NORMAL&#39;) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const sortedHand = GameLogic.sortCards(hand);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // &#38169;&#35823;&#29575;&#36923;&#36753;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (difficulty === &#39;EASY&#39; &amp;&amp; targetHand &amp;&amp; Math.random() &lt; 0.2) return null;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // --- &#20027;&#21160;&#20986;&#29260;&#36923;&#36753; (LEAD) ---</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (!targetHand) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; // 1. &#22914;&#26524;&#19968;&#25163;&#33021;&#20986;&#23436;&#65292;&#30452;&#25509;&#20986;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const fullHandType = GameLogic.analyzeHand(sortedHand);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (fullHandType.type !== TYPES.INVALID) return sortedHand;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; // 2. &#23581;&#35797;&#20986;&#19977;&#24102;&#19968;&#25110;&#19977;&#24102;&#20108; (&#20248;&#20808;&#20986;&#23567;&#30340;)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; // &#32479;&#35745;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const counts = {};</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; sortedHand.forEach(c =&gt; counts[c.rank] = (counts[c.rank] || 0) + 1);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const ranks = Object.keys(counts).map(Number).sort((a,b)=&gt;a-b);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; // &#25214;&#19977;&#24352;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const tripleRank = ranks.find(r =&gt; counts[r] === 3);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (tripleRank) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const tripleCards = sortedHand.filter(c =&gt; c.rank === tripleRank);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// &#23581;&#35797;&#24102;&#21333;&#24352;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const singleRank = ranks.find(r =&gt; r !== tripleRank &amp;&amp; counts[r] === 1);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (singleRank) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return [...tripleCards, sortedHand.find(c =&gt; c.rank === singleRank)];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// &#23581;&#35797;&#24102;&#23545;&#23376;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const pairRank = ranks.find(r =&gt; r !== tripleRank &amp;&amp; counts[r] === 2);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (pairRank) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return [...tripleCards, ...sortedHand.filter(c =&gt; c.rank === pairRank)];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// &#21861;&#37117;&#27809;&#24102;&#65292;&#30452;&#25509;&#20986;&#19977;&#24352; (&#34429;&#28982;&#35268;&#21017;&#36890;&#24120;&#19981;&#20801;&#35768;&#21482;&#20986;&#19977;&#24352;&#65292;&#20294;&#37096;&#20998;&#35268;&#21017;&#20801;&#35768;&#65292;&#36825;&#37324;&#20316;&#20026;&#20445;&#24213;)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// &#25110;&#32773;&#22914;&#26524;&#25214;&#19981;&#21040;&#24102;&#29260;&#65292;&#23601;&#19981;&#20986;&#19977;&#24352;&#65292;&#24448;&#19979;&#36208;&#20986;&#23545;&#23376;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; // 3. &#23581;&#35797;&#20986;&#39034;&#23376; (&#31616;&#21333;&#26816;&#27979;&#65306;&#26159;&#21542;&#26377;5&#24352;&#36830;&#32493;)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; // (&#30053;&#24494;&#22797;&#26434;&#65292;&#20316;&#20026;&#20248;&#21270;&#28857;&#65292;&#26242;&#20248;&#20808;&#20986;&#23545;&#23376;&#21644;&#21333;&#24352;)</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; // 4. &#23581;&#35797;&#20986;&#23545;&#23376; (&#26368;&#23567;&#30340;)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const pairRank = ranks.find(r =&gt; counts[r] === 2);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (pairRank) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return sortedHand.filter(c =&gt; c.rank === pairRank);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; // 5. &#23454;&#22312;&#27809;&#25307;&#65292;&#20986;&#26368;&#23567;&#21333;&#24352;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; // &#22256;&#38590;&#27169;&#24335;&#65306;&#23613;&#37327;&#20445;&#30041;2&#21644;&#29579;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (difficulty === &#39;HARD&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for (let i = sortedHand.length - 1; i &gt;= 0; i--) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (sortedHand[i].rank &lt; 15) return [sortedHand[i]];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; return [sortedHand[sortedHand.length - 1]];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // --- &#36319;&#29260;&#36923;&#36753; (FOLLOW) ---</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // 1. &#23545;&#26041;&#26159;&#29579;&#28856; -&gt; &#25237;&#38477;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (targetHand.type === TYPES.ROCKET) return null;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // 2. &#23581;&#35797;&#21516;&#31867;&#22411;&#21387;&#21046;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; let bestMove = null;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // &#20248;&#20808;&#21305;&#37197;&#30456;&#21516;&#29260;&#22411;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (targetHand.type === TYPES.SINGLE) bestMove = GameLogic.findCardsByType(sortedHand, TYPES.SINGLE, targetHand.rank);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; else if (targetHand.type === TYPES.PAIR) bestMove = GameLogic.findCardsByType(sortedHand, TYPES.PAIR, targetHand.rank);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; else if (targetHand.type === TYPES.TRIPLE) bestMove = GameLogic.findCardsByType(sortedHand, TYPES.TRIPLE, targetHand.rank);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; else if (targetHand.type === TYPES.TRIPLE_ONE) bestMove = GameLogic.findCardsByType(sortedHand, TYPES.TRIPLE_ONE, targetHand.rank);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; else if (targetHand.type === TYPES.TRIPLE_TWO) bestMove = GameLogic.findCardsByType(sortedHand, TYPES.TRIPLE_TWO, targetHand.rank);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; else if (targetHand.type === TYPES.STRAIGHT) bestMove = GameLogic.findCardsByType(sortedHand, TYPES.STRAIGHT, targetHand.rank, targetHand.len);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; else if (targetHand.type === TYPES.BOMB) bestMove = GameLogic.findCardsByType(sortedHand, TYPES.BOMB, targetHand.rank);</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (bestMove) return bestMove;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // 3. &#28856;&#24377;&#21387;&#21046; (&#22914;&#26524;&#23545;&#26041;&#19981;&#26159;&#28856;&#24377;&#65292;&#25110;&#32773;&#23545;&#26041;&#26159;&#28856;&#24377;&#20294;&#25105;&#26356;&#22823;)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (targetHand.type !== TYPES.BOMB &amp;&amp; targetHand.type !== TYPES.ROCKET) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; return GameLogic.findCardsByType(sortedHand, TYPES.BOMB, 0); // &#25214;&#20219;&#24847;&#28856;&#24377;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; } </span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // 4. &#29579;&#28856;&#21387;&#21046;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const jokers = sortedHand.filter(c =&gt; c.rank &gt;= 20);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (jokers.length === 2) return jokers;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; return null; // &#35201;&#19981;&#36215;</span></p><p class="c1"><span class="c0">&nbsp; }</span></p><p class="c1"><span class="c0">};</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">// --- UI &#32452;&#20214; ---</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">const Card = ({ card, selected, onClick, small = false, hidden = false, isLord = false }) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; if (hidden) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; return (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;div </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; className={`</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ${small ? &#39;w-10 h-14&#39; : &#39;w-20 h-28 md:w-24 md:h-36&#39;} </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bg-blue-600 border-2 border-white rounded-lg shadow-md flex items-center justify-center</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bg-opacity-90 bg-pattern transform transition-all duration-200</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; `}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;w-full h-full border border-blue-400 rounded opacity-50 m-1 flex items-center justify-center&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;text-white opacity-20 text-2xl font-bold&quot;&gt;CARD&lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; );</span></p><p class="c1"><span class="c0">&nbsp; }</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; const isRed = card.suit === &#39;&hearts;&#39; || card.suit === &#39;&diams;&#39; || card.color === &#39;red&#39;;</span></p><p class="c1"><span class="c0">&nbsp; </span></p><p class="c1"><span class="c0">&nbsp; return (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &lt;div</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; onClick={() =&gt; onClick &amp;&amp; onClick(card)}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; className={`</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; relative flex flex-col items-center justify-between p-1</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; ${small ? &#39;w-10 h-14 text-sm&#39; : &#39;w-20 h-28 md:w-24 md:h-36 text-xl&#39;} </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; bg-white rounded-lg shadow-md cursor-pointer select-none transition-all duration-200</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; ${selected ? &#39;-translate-y-6 border-yellow-400 ring-4 ring-yellow-400 z-10&#39; : &#39;hover:-translate-y-2&#39;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; ${isRed ? &#39;text-red-600&#39; : &#39;text-black&#39;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; `}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; style={{ border: &#39;1px solid #ccc&#39; }}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;div className=&quot;self-start font-bold leading-none&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div&gt;{card.display}&lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;text-xs scale-75 origin-top-left&quot;&gt;{card.suit}&lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; {isLord &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-4xl opacity-20 pointer-events-none&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#129312;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; )}</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;div className={`${small ? &#39;text-xl&#39; : &#39;text-4xl&#39;}`}&gt;{card.suit}&lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; {!small &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div className=&quot;self-end font-bold leading-none rotate-180&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div&gt;{card.display}&lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;text-xs&quot;&gt;{card.suit}&lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; )}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; );</span></p><p class="c1"><span class="c0">};</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">// &#29609;&#23478;&#25163;&#29260;&#21306;&#22495;</span></p><p class="c1"><span class="c0">const Hand = ({ cards, isUser, onSelectCard, selectedCards = [], isLandlord }) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; return (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &lt;div className=&quot;flex justify-center items-end -space-x-12 md:-space-x-14 min-h-[140px] px-4&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; {cards.map((card, idx) =&gt; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div key={card.id} style={{ zIndex: idx }} className=&quot;relative transition-all duration-300&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{isLandlord &amp;&amp; idx === cards.length - 1 &amp;&amp; isUser &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;absolute -top-8 left-1/2 transform -translate-x-1/2 text-2xl animate-bounce&quot;&gt;&#129312;&lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;Card </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; card={card} </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; selected={isUser &amp;&amp; selectedCards.includes(card.id)}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onClick={isUser ? onSelectCard : undefined}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; hidden={!isUser}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isLord={isLandlord &amp;&amp; !isUser} // &#21035;&#20154;&#30340;&#29260;&#32972;&#38754;&#20063;&#21487;&#20197;&#26631;&#35760;? &#19981;, &#27491;&#38754;&#26631;&#35760;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; ))}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; );</span></p><p class="c1"><span class="c0">};</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">// &#35760;&#29260;&#22120;&#32452;&#20214;</span></p><p class="c1"><span class="c0">const CardRecorder = ({ remainingCards }) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const ranks = [&#39;3&#39;,&#39;4&#39;,&#39;5&#39;,&#39;6&#39;,&#39;7&#39;,&#39;8&#39;,&#39;9&#39;,&#39;10&#39;,&#39;J&#39;,&#39;Q&#39;,&#39;K&#39;,&#39;A&#39;,&#39;2&#39;, &#39;Joker&#39;];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // &#35745;&#31639;&#27599;&#20010;&#28857;&#25968;&#21097;&#20313;&#24352;&#25968;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const getCount = (label) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (label === &#39;Joker&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return remainingCards.filter(c =&gt; c.rank &gt;= 20).length;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; return remainingCards.filter(c =&gt; c.display === label).length;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; return (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;bg-black/60 text-white p-2 rounded-lg text-xs backdrop-blur-sm shadow-xl border border-white/20&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;font-bold mb-1 text-center text-yellow-400&quot;&gt;&#35760;&#29260;&#22120; (&#21097;&#20313;)&lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;grid grid-cols-7 gap-x-2 gap-y-1&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {ranks.map(r =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const count = getCount(r);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let colorClass = &#39;text-white&#39;;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (count === 4) colorClass = &#39;text-red-400 font-bold&#39;; // &#28856;&#24377;&#35686;&#21578;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (count === 0) colorClass = &#39;text-gray-500&#39;;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div key={r} className=&quot;flex justify-between w-full&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;span className=&quot;opacity-70&quot;&gt;{r === &#39;Joker&#39; ? &#39;&#29579;&#39; : r}&lt;/span&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;span className={colorClass}&gt;{count}&lt;/span&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; })}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; );</span></p><p class="c1"><span class="c0">};</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">// --- &#20027;&#31243;&#24207; ---</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">export default function DouDiZhu() {</span></p><p class="c1"><span class="c0">&nbsp; const [deck, setDeck] = useState([]);</span></p><p class="c1"><span class="c0">&nbsp; const [players, setPlayers] = useState([[], [], []]); </span></p><p class="c1"><span class="c0">&nbsp; const [bottomCards, setBottomCards] = useState([]);</span></p><p class="c1"><span class="c0">&nbsp; const [landlord, setLandlord] = useState(null);</span></p><p class="c1"><span class="c0">&nbsp; const [turn, setTurn] = useState(null);</span></p><p class="c1"><span class="c0">&nbsp; const [phase, setPhase] = useState(&#39;MENU&#39;); // MENU, BIDDING, PLAYING, GAME_OVER</span></p><p class="c1"><span class="c0">&nbsp; const [selectedCards, setSelectedCards] = useState([]);</span></p><p class="c1"><span class="c0">&nbsp; const [lastHand, setLastHand] = useState(null); </span></p><p class="c1"><span class="c0">&nbsp; const [message, setMessage] = useState(&quot;&#27426;&#36814;&#26469;&#21040;&#26007;&#22320;&#20027;!&quot;);</span></p><p class="c1"><span class="c0">&nbsp; const [winner, setWinner] = useState(null);</span></p><p class="c1"><span class="c0">&nbsp; const [difficulty, setDifficulty] = useState(&#39;NORMAL&#39;);</span></p><p class="c1"><span class="c0">&nbsp; </span></p><p class="c1"><span class="c0">&nbsp; // &#35760;&#24405;&#27599;&#20010;&#29609;&#23478;&#26368;&#21518;&#20986;&#30340;&#29260;</span></p><p class="c1"><span class="c0">&nbsp; const [tableCards, setTableCards] = useState({ 0: [], 1: [], 2: [] });</span></p><p class="c1"><span class="c0">&nbsp; // &#35760;&#24405;&#25152;&#26377;&#26410;&#30693;&#30340;&#29260;&#65288;&#35760;&#29260;&#22120;&#29992;&#65289;</span></p><p class="c1"><span class="c0">&nbsp; const [remainingCards, setRemainingCards] = useState([]); </span></p><p class="c1"><span class="c0">&nbsp; const [bids, setBids] = useState({});</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; // --- &#21021;&#22987;&#21270;&#28216;&#25103; ---</span></p><p class="c1"><span class="c0">&nbsp; const initGame = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; setPhase(&#39;MENU&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; setMessage(&quot;&#35831;&#36873;&#25321;&#28216;&#25103;&#38590;&#24230;&quot;);</span></p><p class="c1"><span class="c0">&nbsp; };</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; const startGame = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const newDeck = createDeck();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // &#27927;&#29260;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; for (let i = newDeck.length - 1; i &gt; 0; i--) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; const j = Math.floor(Math.random() * (i + 1));</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; [newDeck[i], newDeck[j]] = [newDeck[j], newDeck[i]];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // &#21457;&#29260;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const p1 = newDeck.slice(0, 17);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const p2 = newDeck.slice(17, 34);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const p3 = newDeck.slice(34, 51);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const bottom = newDeck.slice(51);</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; setDeck(newDeck);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; setPlayers([GameLogic.sortCards(p1), GameLogic.sortCards(p2), GameLogic.sortCards(p3)]);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; setBottomCards(bottom);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; setLandlord(null);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; setLastHand(null);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; setTableCards({ 0: [], 1: [], 2: [] });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; setWinner(null);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; setBids({});</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; setSelectedCards([]);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // &#35760;&#29260;&#22120;&#21021;&#22987;&#29366;&#24577;&#65306;&#38500;&#20102;&#33258;&#24049;&#30340;&#29260;&#65292;&#20854;&#20182;&#30340;&#37117;&#31639;&#26410;&#30693;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; setRemainingCards([...newDeck]);</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // &#21076;&#38500;&#29609;&#23478;&#25163;&#29260;&#20013;&#30340;&#29260;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const myHandIds = p1.map(c =&gt; c.id);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; setRemainingCards(prev =&gt; prev.filter(c =&gt; !myHandIds.includes(c.id)));</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // &#38543;&#26426;&#20915;&#23450;&#35841;&#20808;&#21483;&#22320;&#20027;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const firstBidder = Math.floor(Math.random() * 3);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; setTurn(firstBidder);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; setPhase(&#39;BIDDING&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; setMessage(`&#24320;&#22987;&#21483;&#22320;&#20027;&#65292;&#29609;&#23478; ${firstBidder === 0 ? &#39;&#20320;&#39; : (firstBidder === 1 ? &#39;&#21491;&#20391;&#30005;&#33041;&#39; : &#39;&#24038;&#20391;&#30005;&#33041;&#39;)} &#20808;&#21483;&#12290;`);</span></p><p class="c1"><span class="c0">&nbsp; };</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; // --- &#21483;&#22320;&#20027;&#36923;&#36753; ---</span></p><p class="c1"><span class="c0">&nbsp; const handleBid = (score) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; const newBids = { ...bids, [turn]: score };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; setBids(newBids);</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; if (score &gt; 0) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // &#25104;&#20026;&#22320;&#20027;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setLandlord(turn);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const newPlayers = [...players];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newPlayers[turn] = GameLogic.sortCards([...newPlayers[turn], ...bottomCards]);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setPlayers(newPlayers);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // &#22914;&#26524;&#21035;&#20154;&#26159;&#22320;&#20027;&#65292;&#24213;&#29260;&#32763;&#24320;&#65292;&#20174;&#35760;&#29260;&#22120;&#31227;&#38500;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const bottomIds = bottomCards.map(c =&gt; c.id);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setRemainingCards(prev =&gt; prev.filter(c =&gt; !bottomIds.includes(c.id)));</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setPhase(&#39;PLAYING&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setMessage(`${turn === 0 ? &#39;&#20320;&#39; : &#39;&#30005;&#33041;&#39;} &#25250;&#21040;&#20102;&#22320;&#20027;!`);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setTableCards({ 0: [], 1: [], 2: [] }); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // &#19981;&#21483;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const nextTurn = (turn + 1) % 3;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (Object.keys(newBids).length === 3) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// &#24378;&#21046;&#22320;&#20027;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;setLandlord(nextTurn); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const newPlayers = [...players];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;newPlayers[nextTurn] = GameLogic.sortCards([...newPlayers[nextTurn], ...bottomCards]);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;setPlayers(newPlayers);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const bottomIds = bottomCards.map(c =&gt; c.id);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;setRemainingCards(prev =&gt; prev.filter(c =&gt; !bottomIds.includes(c.id)));</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;setPhase(&#39;PLAYING&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;setMessage(`&#27809;&#20154;&#21483;&#22320;&#20027;&#65292;${nextTurn === 0 ? &#39;&#20320;&#39; : &#39;&#30005;&#33041;&#39;} &#34987;&#36843;&#33829;&#19994;&#12290;`);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;setTurn(nextTurn);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;setMessage(`&#29609;&#23478; ${turn} &#19981;&#21483;&#65292;&#36718;&#21040;&#29609;&#23478; ${nextTurn}&#12290;`);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; };</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; // --- AI &#34892;&#20026;&#24490;&#29615; ---</span></p><p class="c1"><span class="c0">&nbsp; useEffect(() =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (phase !== &#39;BIDDING&#39; &amp;&amp; phase !== &#39;PLAYING&#39;) return;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; let timer;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (turn !== 0) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;timer = setTimeout(() =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (phase === &#39;BIDDING&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const hand = players[turn];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const goodCards = hand.filter(c =&gt; c.rank &gt;= 15).length;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// &#38590;&#24230;&#24433;&#21709;&#21483;&#29260;&#28608;&#36827;&#31243;&#24230;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;let threshold = 0.6;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (difficulty === &#39;HARD&#39;) threshold = 0.4;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const shouldBid = goodCards &gt;= 2 || Math.random() &gt; threshold;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;handleBid(shouldBid ? 3 : 0);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} else if (phase === &#39;PLAYING&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;handleAIPlay();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;}, 1500); // &#31245;&#24494;&#24930;&#19968;&#28857;&#65292;&#30041;&#32473;&#21160;&#30011;&#26102;&#38388;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; return () =&gt; clearTimeout(timer);</span></p><p class="c1"><span class="c0">&nbsp; }, [turn, phase, players, lastHand, difficulty]);</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; // --- AI &#20986;&#29260;&#36923;&#36753; ---</span></p><p class="c1"><span class="c0">&nbsp; const handleAIPlay = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp;const aiHand = players[turn];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp;const currentTarget = (lastHand &amp;&amp; lastHand.playerId !== turn) ? lastHand.handAnalysis : null;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp;const cardsToPlay = GameLogic.findBestMove(aiHand, currentTarget, difficulty);</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp;if (cardsToPlay) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;playCards(turn, cardsToPlay);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp;} else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;passTurn(turn);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp;}</span></p><p class="c1"><span class="c0">&nbsp; };</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; // --- &#29609;&#23478;/AI &#21160;&#20316; ---</span></p><p class="c1"><span class="c0">&nbsp; </span></p><p class="c1"><span class="c0">&nbsp; const playCards = (playerId, cards) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; const currentAnalysis = GameLogic.analyzeHand(cards);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; // &#26356;&#26032;&#25163;&#29260;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; const newPlayers = [...players];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; newPlayers[playerId] = newPlayers[playerId].filter(c =&gt; !cards.find(pc =&gt; pc.id === c.id));</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; setPlayers(newPlayers);</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; // &#35760;&#29260;&#22120;&#26356;&#26032;&#65306;&#31227;&#38500;&#25171;&#20986;&#30340;&#29260;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; const playedIds = cards.map(c =&gt; c.id);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; setRemainingCards(prev =&gt; prev.filter(c =&gt; !playedIds.includes(c.id)));</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; // &#26356;&#26032;&#22330;&#19978;&#26368;&#21518;&#20986;&#30340;&#29260;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; const newHandInfo = { playerId, cards, handAnalysis: currentAnalysis };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; setLastHand(newHandInfo);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; const newTable = { ...tableCards };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; newTable[playerId] = cards; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; // &#28165;&#31354;&#20854;&#20182;&#20154;&#30340;&#20986;&#29260;&#26174;&#31034;&#65292;&#20445;&#35777;&#35270;&#35273;&#28966;&#28857;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; for(let i=0; i&lt;3; i++) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (i !== playerId) newTable[i] = []; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; }</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; setTableCards(newTable);</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; const role = playerId === landlord ? &#39;&#22320;&#20027;&#39; : &#39;&#20892;&#27665;&#39;;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; const name = playerId === 0 ? &#39;&#20320;&#39; : `&#30005;&#33041;${playerId === 1 ? &#39;(&#21491;)&#39; : &#39;(&#24038;)&#39;}`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; setMessage(`${role} ${name} &#20986;&#20102; ${cards.length} &#24352;&#29260;`);</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; if (newPlayers[playerId].length === 0) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setPhase(&#39;GAME_OVER&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const isLandlordWin = playerId === landlord;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setWinner(isLandlordWin ? &#39;&#22320;&#20027;&#39; : &#39;&#20892;&#27665;&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; }</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; setTurn((playerId + 1) % 3);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; if (playerId === 0) setSelectedCards([]);</span></p><p class="c1"><span class="c0">&nbsp; };</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; const passTurn = (playerId) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; const newTable = { ...tableCards };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; newTable[playerId] = &#39;PASS&#39;; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; setTableCards(newTable);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; const nextPlayer = (playerId + 1) % 3;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; setTurn(nextPlayer);</span></p><p class="c1"><span class="c0">&nbsp; };</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; const handleUserPlay = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const cards = players[0].filter(c =&gt; selectedCards.includes(c.id));</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const analysis = GameLogic.analyzeHand(cards);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (analysis.type === TYPES.INVALID) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; alert(&quot;&#29260;&#22411;&#19981;&#21512;&#27861;&#65281;&quot;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const target = (lastHand &amp;&amp; lastHand.playerId !== 0) ? lastHand.handAnalysis : null;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (target &amp;&amp; !GameLogic.canBeat(cards, target)) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; alert(&quot;&#25171;&#19981;&#36807;&#19978;&#23478;&#65281;&quot;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; playCards(0, cards);</span></p><p class="c1"><span class="c0">&nbsp; };</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; const handleUserPass = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp;if (!lastHand || lastHand.playerId === 0) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;alert(&quot;&#20320;&#26159;&#20808;&#25163;&#65292;&#24517;&#39035;&#20986;&#29260;&#65281;&quot;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp;passTurn(0);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp;setSelectedCards([]);</span></p><p class="c1"><span class="c0">&nbsp; };</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; const handleUserSelect = (card) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (phase !== &#39;PLAYING&#39; || turn !== 0) return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; setSelectedCards(prev =&gt; prev.includes(card.id) ? prev.filter(id =&gt; id !== card.id) : [...prev, card.id]);</span></p><p class="c1"><span class="c0">&nbsp; };</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; // --- &#28210;&#26579;&#36741;&#21161; ---</span></p><p class="c1"><span class="c0">&nbsp; const renderTableCards = (playerId) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const content = tableCards[playerId];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (!content || content.length === 0) return null;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (content === &#39;PASS&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; return &lt;div className=&quot;text-white/80 font-bold text-2xl bg-black/40 px-6 py-2 rounded-full animate-pulse backdrop-blur-sm&quot;&gt;&#19981;&#35201;&lt;/div&gt;;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const animationClass = &quot;animate-zoom-in&quot;;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const spacing = content.length &gt; 5 ? &#39;-space-x-8&#39; : &#39;-space-x-6&#39;;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; return (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div className={`flex ${spacing} origin-center transition-all duration-300 ${animationClass}`}&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {content.map((c, i) =&gt; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div key={i} style={{zIndex: i}} className=&quot;transform hover:-translate-y-2 transition-transform&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;Card card={c} small={false} /&gt; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ))}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; );</span></p><p class="c1"><span class="c0">&nbsp; };</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; // &#33756;&#21333;&#30028;&#38754;</span></p><p class="c1"><span class="c0">&nbsp; if (phase === &#39;MENU&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; return (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;flex flex-col h-screen w-full bg-green-800 text-white items-center justify-center space-y-8 bg-pattern&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h1 className=&quot;text-6xl font-bold text-yellow-400 drop-shadow-lg mb-8&quot;&gt;&#26007;&#22320;&#20027;&lt;/h1&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;flex gap-6&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {Object.keys(DIFFICULTIES).map(key =&gt; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; key={key}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onClick={() =&gt; { setDifficulty(key); startGame(); }}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; className={`${DIFFICULTIES[key].color} hover:brightness-110 text-white text-2xl font-bold py-4 px-10 rounded-2xl shadow-xl transition-transform hover:scale-105 active:scale-95`}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {DIFFICULTIES[key].label}&#27169;&#24335;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ))}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;text-white/60 mt-8&quot;&gt;&#36873;&#25321;&#38590;&#24230;&#24320;&#22987;&#28216;&#25103;&lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; );</span></p><p class="c1"><span class="c0">&nbsp; }</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; return (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &lt;div className=&quot;flex flex-col h-screen w-full bg-[#1a5c37] text-white overflow-hidden select-none font-sans relative&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;style&gt;{`</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; .bg-pattern {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; background-image: radial-gradient(#2d8a55 15%, transparent 16%), radial-gradient(#2d8a55 15%, transparent 16%);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; background-size: 20px 20px;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; background-position: 0 0, 10px 10px;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; @keyframes zoom-in {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0% { transform: scale(0.5); opacity: 0; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 80% { transform: scale(1.1); opacity: 1; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 100% { transform: scale(1.0); opacity: 1; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; .animate-zoom-in {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; animation: zoom-in 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; `}&lt;/style&gt;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; {/* &#39030;&#37096;&#26639; */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;div className=&quot;flex justify-between items-center p-4 bg-black/20 shadow-lg h-16 z-20 backdrop-blur-sm&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;flex items-center gap-4&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;button onClick={initGame} className=&quot;bg-white/20 hover:bg-white/30 px-3 py-1 rounded text-sm&quot;&gt;&#36820;&#22238;&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div className=&quot;font-bold text-lg text-yellow-400&quot;&gt;&#38590;&#24230;: {DIFFICULTIES[difficulty].label}&lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div className=&quot;text-sm opacity-90 hidden md:block&quot;&gt;{message}&lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {/* &#24213;&#29260;&#23637;&#31034; */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;flex gap-2&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {bottomCards.length &gt; 0 ? bottomCards.map(c =&gt; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div key={c.id} className=&quot;transform scale-75 origin-top&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;Card card={c} small hidden={phase === &#39;BIDDING&#39;} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )) : &lt;div className=&quot;text-xs border border-white/30 p-2 rounded&quot;&gt;&#24213;&#29260;&#21306;&lt;/div&gt;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; {/* &#28216;&#25103;&#20027;&#21306;&#22495; */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;div className=&quot;flex-1 relative flex flex-col w-full max-w-7xl mx-auto&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {/* &#24038;&#20391;&#30005;&#33041; (Player 2) */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;absolute left-2 top-20 flex flex-col items-center gap-2 z-10&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div className={`flex flex-col items-center p-2 rounded-lg ${turn === 2 ? &#39;bg-yellow-500/20 ring-2 ring-yellow-400&#39; : &#39;&#39;}`}&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className={`w-16 h-16 rounded-full flex items-center justify-center text-3xl border-4 shadow-lg bg-gray-200 ${landlord === 2 ? &#39;border-yellow-500&#39; : &#39;border-gray-500&#39;}`}&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {landlord === 2 ? &#39;&#129312;&#39; : &#39;&#128104;&zwj;&#127806;&#39;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;text-xs mt-1 font-bold bg-black/40 px-2 rounded-full&quot;&gt;{players[2].length}&#24352;&lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {/* &#21491;&#20391;&#30005;&#33041; (Player 1) */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;absolute right-2 top-20 flex flex-col items-center gap-2 z-10&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div className={`flex flex-col items-center p-2 rounded-lg ${turn === 1 ? &#39;bg-yellow-500/20 ring-2 ring-yellow-400&#39; : &#39;&#39;}`}&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className={`w-16 h-16 rounded-full flex items-center justify-center text-3xl border-4 shadow-lg bg-gray-200 ${landlord === 1 ? &#39;border-yellow-500&#39; : &#39;border-gray-500&#39;}`}&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {landlord === 1 ? &#39;&#129312;&#39; : &#39;&#128104;&zwj;&#127806;&#39;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;text-xs mt-1 font-bold bg-black/40 px-2 rounded-full&quot;&gt;{players[1].length}&#24352;&lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {/* &#35760;&#29260;&#22120; (&#21491;&#19978;&#35282;&#65292;&#20294;&#22312;&#22836;&#20687;&#19979;&#26041;) */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;absolute right-2 top-48 z-10 hidden md:block&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;CardRecorder remainingCards={remainingCards} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {/* &#31227;&#21160;&#31471;&#35760;&#29260;&#22120;&#20301;&#32622; */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;absolute top-16 left-1/2 transform -translate-x-1/2 z-0 opacity-80 md:hidden scale-75 origin-top&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;CardRecorder remainingCards={remainingCards} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {/* --- &#26680;&#24515;&#20986;&#29260;&#23637;&#31034;&#21306; (&#23631;&#24149;&#20013;&#38388;) --- */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;absolute inset-0 flex items-center justify-center pointer-events-none z-0&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div className=&quot;absolute left-[15%] top-[35%] md:left-[20%]&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{renderTableCards(2)}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div className=&quot;absolute right-[15%] top-[35%] md:right-[20%]&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{renderTableCards(1)}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div className=&quot;absolute bottom-[40%] left-1/2 transform -translate-x-1/2&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{renderTableCards(0)}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {/* &#32988;&#21033;&#32467;&#31639; */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {winner &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div className=&quot;absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm animate-fade-in&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;bg-white text-black p-8 rounded-2xl shadow-2xl text-center transform scale-110&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;text-6xl mb-4&quot;&gt;{winner === &#39;&#22320;&#20027;&#39; ? &#39;&#129312;&#39; : &#39;&#128104;&zwj;&#127806;&#39;}&lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h1 className={`text-5xl font-bold mb-4 ${winner === &#39;&#22320;&#20027;&#39; ? &#39;text-yellow-600&#39; : &#39;text-green-600&#39;}`}&gt;{winner} &#33719;&#32988;!&lt;/h1&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;flex justify-center gap-4 mt-6&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={startGame} className=&quot;bg-blue-600 hover:bg-blue-700 text-white text-xl font-bold px-8 py-3 rounded-full shadow-lg transition-transform hover:scale-105&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#20877;&#26469;&#19968;&#23616;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={initGame} className=&quot;bg-gray-200 hover:bg-gray-300 text-gray-800 text-xl font-bold px-8 py-3 rounded-full shadow-lg&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#36820;&#22238;&#20027;&#39029;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {/* &#24213;&#37096;&#29609;&#23478;&#25511;&#21046;&#21306; */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;mt-auto mb-2 flex flex-col items-center gap-2 w-full z-30&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {/* &#25552;&#31034;&#20449;&#24687; */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;h-8 text-yellow-300 font-bold text-shadow&quot;&gt;{turn === 0 ? &quot;&#36718;&#21040;&#20320;&#20102;!&quot; : &quot;&quot;}&lt;/div&gt;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {/* &#25511;&#21046;&#25353;&#38062;&#32452; */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;h-12 flex gap-4 items-center&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {phase === &#39;BIDDING&#39; &amp;&amp; turn === 0 &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={() =&gt; handleBid(3)} className=&quot;bg-yellow-500 hover:bg-yellow-600 text-white px-8 py-2 rounded-full font-bold shadow-lg transform transition active:scale-95 border-b-4 border-yellow-700&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#21483;&#22320;&#20027;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={() =&gt; handleBid(0)} className=&quot;bg-gray-500 hover:bg-gray-600 text-white px-8 py-2 rounded-full font-bold shadow-lg transform transition active:scale-95 border-b-4 border-gray-700&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#19981;&#21483;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {phase === &#39;PLAYING&#39; &amp;&amp; turn === 0 &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {(!lastHand || lastHand.playerId !== 0) &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={handleUserPass} className=&quot;bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-full font-bold shadow-lg border-b-4 border-orange-700 active:scale-95&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#19981;&#20986;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onClick={handleUserPlay} </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; disabled={selectedCards.length === 0}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; className={`px-10 py-2 rounded-full font-bold shadow-lg border-b-4 active:scale-95 transition-all</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ${selectedCards.length &gt; 0 </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ? &#39;bg-blue-500 hover:bg-blue-600 text-white border-blue-700&#39; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : &#39;bg-gray-400 text-gray-200 border-gray-500 cursor-not-allowed&#39;}`}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#20986;&#29260;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={() =&gt; setSelectedCards([])} className=&quot;bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-full text-sm backdrop-blur-md&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#37325;&#36873;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1 c3"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {/* &#29609;&#23478;&#25163;&#29260; */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;w-full px-2 overflow-visible pb-2 pt-4&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;flex items-center gap-2 mb-[-10px] ml-4&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div className={`w-10 h-10 rounded-full flex items-center justify-center text-xl border-2 bg-gray-100 ${landlord === 0 ? &#39;border-yellow-500&#39; : &#39;border-gray-500&#39;}`}&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {landlord === 0 ? &#39;&#129312;&#39; : &#39;&#128104;&zwj;&#127806;&#39;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span className=&quot;text-xs bg-black/50 px-2 py-1 rounded text-white&quot;&gt;&#20320;&lt;/span&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;Hand </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cards={players[0]} </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isUser={true} </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onSelectCard={handleUserSelect} </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; selectedCards={selectedCards}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isLandlord={landlord === 0}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; );</span></p><p class="c1"><span class="c0">}</span></p><p class="c1 c3"><span class="c0"></span></p></body></html>